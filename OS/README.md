# 1. 프로세스 VS 쓰레드

## 프로세스

- 코드(프로그램)가 메모리에 적재되어 실행된 상태 or 자원을 할당받는 작업단위.
- 메모리에 올라갈 때 운영체제로부터 시스템 자원을 할당받게 된다. 프로세스마다 독립된 메모리 영역 code/data/stack/heap 영역을 할당 받는다.
  - stack -> 함수의 매개변수, 복귀 주소, 함수 매개변수, 지역 변수와 같은 임시 자료를 가짐.
  - data -> 전역 변수들을 가짐.
  - heap -> 동적으로 할당되는 메모리.

|                  프로그램                  | VS  |                  프로세스                  |
| :----------------------------------------: | :-: | :----------------------------------------: |
| 코드와 같은 정적 데이터를 가진 정적인 객체 |     | 현재 관리하는 자원 정보를 가진 동적인 객체 |

### 프로세스 제어 블록(Process Control Block, PCB)

- 프로세스의 상태정보를 저장하고 있는 구조체이다.
- 프로세스 생성시 만들어지며 주기억장치에 유지된다.
- 프로세스 상태관리와 문맥교환을 위해 필요하다.

  - 운영체제는 프로세스를 관리하기 위해 프로세스의 생성과 동시에 고유한 PCB를 생성한다. 프로세스는 CPU를 할당받아 작업을 처리하다가도 프로세스 전환이 발생하면 진행하던 작업을 저장하고 CPU를 반환해야 한다. 이때, 작업의 진행 상황을 모두 PCB에 저장하게 된다. 그리고 다시 CPU를 할당받게 되면 PCB에 저장되어있던 내용을 불러와 이전에 종료되었던 시점부터 다시 작업을 수행한다.

    | PCB                    | 설명                          |
    | :--------------------- | :---------------------------- |
    | PID                    | 프로세스의 고유 번호          |
    | Process state          | 준비,대기,실행 등의 상태      |
    | Priority               | 스케줄링 및 프로세스 우선순위 |
    | 포인터                 | 다음 실행될 프로세스의 포인터 |
    | Register information   | 레지스터 관련 정보            |
    | Memory information     | 할당된 자원 정보              |
    | Accounting information | CPU 사용시간, 실제 사용시간   |
    | I/O information        | 입출력 상태 정보              |

---

## 쓰레드

- 프로세스 내에 실행되는 실행 흐름의 단위
- 프로세스가 할당받은 메모리 영역 내에서 Stack 형식으로 할당된 메모리 영역은 따로 할당받고, 나머지는 같은 프로세스 내 다른 쓰레드와 공유한다.

### 쓰레드마다 스택을 독립적으로 할당하는 이유

- 스택은 함수호출 정보를 저장하기 위해 사용되는 메모리 공간이다.
- 스택 메모리 공간이 독립적이라는 것은 독립적인 함수호출이 가능하다는 것이고, 이는 독립적인 실행 흐름이 추가된다는 것이다.

---

# 2. 멀티 프로세스와 멀티 쓰레드

- 멀티 프로세스

  - 하나의 프로그램을 여러 개의 프로세스로 구성하여 각 프로세스가 1개의 작업을 처리하도록 하는 것.
  - 장점
    - 보안성이 높음.
    - 각 프로세스는 서로 영향이 없어 하나에 문제가 발생하더라도 나머지는 정상 작동한다.
  - 단점
    - 많은 메모리 공간과 CPU시간을 차지한다.
    - 각각의 고유한 메모리 공간을 가지므로 자원 공유시 오버헤드가 크다.
    - 문맥교환에 비용이 많이 든다.

- 멀티 쓰레드
  - 하나의 프로그램을 여러 스레드로 병렬처리 하는 것.
  - 장점
    - 모든 스레드가 서로 자원과 메모리를 공유하므로 적은 메모리 공간과 문맥교환이 빠르다.
  - 단점
    - 교착상태가 발생할 수 있다. 여러 쓰레드가 하나의 자원에 동시에 접근.
    - 서로 영향을 미치므로 하나에 이상이 생기면 전체 쓰레드에 영향을 미친다.

---
